% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fx_helpers.R
\name{make_fx_base_rates_matrix}
\alias{make_fx_base_rates_matrix}
\title{Make FX Base Currency Rates Matrix}
\usage{
make_fx_base_rates_matrix(prices_df, pair_base_currencies, usd_rates_df)
}
\arguments{
\item{prices_df}{Long dataframe with pair, date, close columns}

\item{pair_base_currencies}{Named vector mapping pair names to their base currency
e.g., c(EURUSD = "EUR", USDJPY = "USD", EURJPY = "EUR")}

\item{usd_rates_df}{Long dataframe with columns: currency, date, rate
where rate is the XXX/USD rate (how many USD per 1 unit of currency).
USD should have rate = 1.0}
}
\value{
Wide matrix suitable for fx_backtest base_currency_rates parameter
}
\description{
Build a matrix of base currency rates for position sizing.
For each FX pair, this provides the XXX/USD rate for the pair's base currency,
which is used to convert USD equity to base currency units for position sizing.
}
\examples{
\dontrun{
pair_base <- c(EURUSD = "EUR", USDJPY = "USD", EURJPY = "EUR")

usd_rates_df <- data.frame(
  currency = c("EUR", "EUR", "USD", "USD"),
  date = as.Date(c("2024-01-01", "2024-01-02", "2024-01-01", "2024-01-02")),
  rate = c(1.10, 1.11, 1.0, 1.0)
)

base_rates <- make_fx_base_rates_matrix(prices_df, pair_base, usd_rates_df)
}
}
